<div class="container">
  <ol class="breadcrumb">
    <li><a ui-sref="forums">Forum</a></li>
    <li class="active">{{forumTitle}}</li>
  </ol>
  <div class="row container">
    <pagination style="margin:0px" total-pages="totalPages" current-page="currentPage" on-select-page="updPage(page)">
    </pagination>
    <div class="forum-top pull-right">
      <button class="btn btn-md btn-success" data-toggle="modal" data-target="#new_topic" ng-show="isLogged()">
        <i class="fa fa-file-text"></i>
        Crea un nuovo argomento
      </button>
<!-- FIXME: avendo aggiunto la pagination, dobbiamo aggiustare questa funzionalitÃ 
      <button id="showNoAns" class="btn btn-md btn-info" ng-click="onlyUnans()" ng-show="unansweredTopics && isLogged()">
        <span class="badge pull-right">{{unansweredTopics}}</span>
        Argomenti senza risposte
      </button>
      <button id="showAll" class="btn btn-md btn-warning" ng-click="showAll()" ng-show="isLogged()">
        Tutti gli argomenti
      </button>
-->
    </div>
  </div>
  <div class="forum-group focus-light panel panel-info">
    <div class="panel-heading">
      <dl class="row">
        <dd class="content col-xs-6"><b>Argomenti</b></dd>
        <dd class="count col-md-1 hidden-xs hidden-sm">Risposte</dd>
        <dd class="count col-sm-1 visible-sm">Risp.</dd>
        <dd class="count col-md-1 hidden-sm hidden-xs">Visite</dd>
        <dd class="lastpost col-xs-6 col-sm-5 col-md-4">Ultima risposta</dd>
      </dl>
    </div>
    <div class="panel-body">
      <dl class="row" ng-repeat="topic in topics">
        <dd class="content col-xs-6">
          <i class="fa fa-{{topic.status | getIcon}}"></i>
          <a ui-sref="topic({ topicId: topic.id, pageNum: 1 })"><b>{{topic.title}}</b></a>
          </br>
          di <a ui-sref="user({userId: topic.author_username})">{{topic.author_username}}</a> &middot; {{topic.timestamp | dateFmt}} <!-- TODO: meno dati marginali (data/ora) da mobile -->
        </dd>
        <dd class="count col-sm-1 hidden-xs">{{topic.posts-1}}</dd>
        <dd class="count col-md-1 hidden-sm hidden-xs">{{topic.views}}</dd>
        <dd class="lastpost col-xs-6 col-sm-5 col-md-4" ng-show="topic.posts-1">
          di <a ui-sref="user({userId: topic.lastpost.username})">{{topic.lastpost.username}}</a>
          <a class="dont-underline" ui-sref="topic({topicId: topic.id, pageNum: lastPage(topic.posts)})" title="Vai al messaggio">
            <i class="fa fa-share-square-o"></i>
          </a>
          </br>
          {{topic.lastpost.timestamp | dateFmt}}
        </dd>
        <dd class="lastpost col-xs-6 col-sm-5 col-md-4" ng-hide="topic.posts-1">
          Non ci sono risposte
        </dd>
      </dl>
    </div>
  </div>
  <div class="modal fade" id="new_topic" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
          <h4 class="modal-title">Nuovo argomento</h4>
        </div>
        <div class="modal-body">
            <input ng-model="newTitle" type="text" class="form-control" placeholder="Scrivi un titolo...">
            <textarea ng-model="newText" class="form-control" rows="3" placeholder="Scrivi il testo dell'argomento..."></textarea>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Chiudi</button>
          <button type="button" class="btn btn-success" data-dismiss="modal" ng-click="newTopic()">Invia</button>
        </div>
      </div>
    </div>
  </div>
</div>
